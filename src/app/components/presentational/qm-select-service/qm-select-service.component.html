<div class="qm-flow-sub-header">
    <div class="qm-flow-sub-header__left">
        <div *ngIf="multiServiceEnabled" class="qm-switch__container">
            <label for="qm-switch" class="qm-switch-label">
                <input id="qm-switch" class="qm-switch" type="checkbox" (change)="onSwitchChange()" [(ngModel)]="isMultiServiceOn">
                <div class="qm-switch__slider"></div>
            </label>
            <div class="qm-switch__slider-text">{{ 'multi_service' | translate }}</div>
        </div>
    </div>
    <input *ngIf="serviceList && serviceList.length >= searchFieldServiceCount" type="text" class="qm-flow-sub-header__search" qmClearInput [(ngModel)]="searchText"  (input)="handleInput($event)" placeholder="{{'search_service' | translate}}"  />
    <div class="qm-flow-sub-header__right">
        <div class="qm-done-button" (click)="doneButtonClick()" *ngIf="selectedServiceList && selectedServiceList.length > 0">
                {{'banner_done_label' | translate }}
        </div>
    </div>
</div>

<div [ngClass]="flowType === 'CREATE_APPOINTMENT' ? 'qm-service-list__container' : 'qm-service-list__container-ext'" dir="{{ userDirection$ | async }}">
    <div class="qm-service-list__item-container">
        <div class="qm-service-list__selected-item-container" *ngFor="let service of selectedServiceList; let rowId = index">
                <div class="qm-service-list__index-item">{{ rowId + 1 }}</div>
                <div class="qm-service-list__item qm-service-list__item--selected">
                    <div class="qm-service-list__item--text">{{ service.name && service.name.length > 0 ? service.name : service.internalName }}</div>
                        <i *ngIf="!(service.isBind)" class="icon-close qm-search__icon" aria-hidden="true" (click)="onServiceRemove(service)"></i>
                </div>
        </div>    
    </div>
    <div class="qm-service-list__item-container">
        <div class="qm-service-list__header" *ngIf="mostFrequentServiceList && mostFrequentServiceList.length > 0 && (mostFrequentServiceList | filterService: [filterText, flowType]).length > 0">{{ ('most_freq_services' | translate) }}</div>
        <div class="qm-service-list__item" (click)="onServiceSelect(service, true)" *ngFor="let service of mostFrequentServiceList | filterService : [filterText, flowType]">
            <div class="qm-service-list__item--text">{{ service.name && service.name.length > 0 ? service.name : service.internalName }}</div>
        </div>
    </div>
    <div class="qm-service-list__item-container">
        <div class="qm-service-list__header" *ngIf="selectedBranch && (filteredServiceList | filterService: [filterText, flowType]).length > 0">{{ ('available_services' | translate) + ' ' + selectedBranch.name }}</div>
        <div class="qm-service-list__header" *ngIf="selectedBranch && filteredServiceList.length === 0 && flowType === 'CREATE_APPOINTMENT'">{{ ('no_bookable_service' | translate) }}</div>
        <div class="qm-service-list__item" (click)="onServiceSelect(service, true)" *ngFor="let service of filteredServiceList | filterService : [filterText, flowType]">
            <div class="qm-service-list__item--text">{{ service.name && service.name.length > 0 ? service.name : service.internalName }}</div>
        </div>
    </div>
</div>